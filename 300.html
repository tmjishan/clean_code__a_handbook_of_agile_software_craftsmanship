<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p300" style="overflow: hidden; position: relative; background-color: white; width: 790px; height: 1018px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_300{left:648px;bottom:945px;letter-spacing:0.14px;}
#t2_300{left:120px;bottom:945px;letter-spacing:-0.04px;word-spacing:-0.19px;}
#t3_300{left:120px;bottom:890px;letter-spacing:0.06px;word-spacing:1.22px;}
#t4_300{left:257px;bottom:890px;letter-spacing:-0.15px;}
#t5_300{left:413px;bottom:890px;letter-spacing:0.1px;word-spacing:1.18px;}
#t6_300{left:120px;bottom:871px;letter-spacing:0.09px;word-spacing:-0.07px;}
#t7_300{left:120px;bottom:853px;letter-spacing:0.09px;word-spacing:1.02px;}
#t8_300{left:120px;bottom:835px;letter-spacing:0.12px;}
#t9_300{left:145px;bottom:835px;letter-spacing:-0.15px;}
#ta_300{left:250px;bottom:835px;}
#tb_300{left:148px;bottom:812px;letter-spacing:0.08px;word-spacing:0.8px;}
#tc_300{left:120px;bottom:793px;letter-spacing:0.11px;}
#td_300{left:148px;bottom:770px;letter-spacing:0.04px;word-spacing:-0.11px;}
#te_300{left:120px;bottom:752px;letter-spacing:0.1px;word-spacing:-0.05px;}
#tf_300{left:120px;bottom:734px;letter-spacing:-0.15px;}
#tg_300{left:236px;bottom:734px;letter-spacing:0.11px;}
#th_300{left:148px;bottom:500px;letter-spacing:0.11px;word-spacing:0.56px;}
#ti_300{left:482px;bottom:501px;letter-spacing:-0.15px;}
#tj_300{left:625px;bottom:500px;letter-spacing:0.14px;}
#tk_300{left:120px;bottom:482px;letter-spacing:0.07px;word-spacing:-0.2px;}
#tl_300{left:120px;bottom:463px;letter-spacing:0.02px;word-spacing:0.83px;}
#tm_300{left:432px;bottom:464px;letter-spacing:-0.15px;}
#tn_300{left:575px;bottom:463px;letter-spacing:0.15px;word-spacing:0.71px;}
#to_300{left:120px;bottom:445px;letter-spacing:0.05px;word-spacing:0.14px;}
#tp_300{left:120px;bottom:427px;letter-spacing:0.11px;word-spacing:0.05px;}
#tq_300{left:120px;bottom:408px;letter-spacing:0.03px;}
#tr_300{left:148px;bottom:340px;letter-spacing:0.08px;word-spacing:-0.29px;}
#ts_300{left:120px;bottom:321px;letter-spacing:0.09px;word-spacing:2.57px;}
#tt_300{left:443px;bottom:322px;letter-spacing:-0.15px;}
#tu_300{left:575px;bottom:321px;}
#tv_300{left:585px;bottom:322px;letter-spacing:-0.15px;}
#tw_300{left:120px;bottom:304px;letter-spacing:-0.15px;}
#tx_300{left:180px;bottom:303px;letter-spacing:0.09px;}
#ty_300{left:213px;bottom:304px;letter-spacing:-0.15px;}
#tz_300{left:342px;bottom:303px;letter-spacing:0.09px;}
#t10_300{left:148px;bottom:280px;letter-spacing:0.14px;}
#t11_300{left:176px;bottom:281px;letter-spacing:-0.15px;}
#t12_300{left:331px;bottom:280px;letter-spacing:0.09px;word-spacing:0.02px;}
#t13_300{left:545px;bottom:281px;letter-spacing:-0.15px;}
#t14_300{left:120px;bottom:262px;letter-spacing:0.1px;word-spacing:0.51px;}
#t15_300{left:120px;bottom:243px;letter-spacing:0.07px;word-spacing:-0.12px;}
#t16_300{left:120px;bottom:225px;letter-spacing:0.1px;word-spacing:-0.29px;}
#t17_300{left:120px;bottom:207px;letter-spacing:0.09px;word-spacing:1.16px;}
#t18_300{left:120px;bottom:188px;letter-spacing:0.14px;word-spacing:-0.02px;}
#t19_300{left:148px;bottom:165px;letter-spacing:0.09px;word-spacing:2.36px;}
#t1a_300{left:120px;bottom:147px;letter-spacing:0.08px;word-spacing:1.76px;}
#t1b_300{left:384px;bottom:148px;letter-spacing:-0.15px;}
#t1c_300{left:403px;bottom:147px;letter-spacing:0.08px;word-spacing:1.89px;}
#t1d_300{left:120px;bottom:129px;letter-spacing:0.1px;word-spacing:-0.05px;}
#t1e_300{left:489px;bottom:129px;letter-spacing:-0.15px;}
#t1f_300{left:532px;bottom:129px;letter-spacing:-0.01px;word-spacing:0.13px;}
#t1g_300{left:120px;bottom:110px;letter-spacing:0.1px;}
#t1h_300{left:155px;bottom:702px;letter-spacing:-0.11px;}
#t1i_300{left:234px;bottom:702px;letter-spacing:-0.15px;}
#t1j_300{left:260px;bottom:688px;letter-spacing:-0.16px;}
#t1k_300{left:155px;bottom:674px;letter-spacing:-0.11px;}
#t1l_300{left:260px;bottom:674px;letter-spacing:-0.15px;}
#t1m_300{left:155px;bottom:661px;letter-spacing:-0.11px;}
#t1n_300{left:286px;bottom:661px;letter-spacing:-0.67px;word-spacing:0.14px;}
#t1o_300{left:155px;bottom:647px;letter-spacing:-0.11px;}
#t1p_300{left:313px;bottom:647px;letter-spacing:-0.15px;}
#t1q_300{left:155px;bottom:633px;letter-spacing:-0.11px;}
#t1r_300{left:313px;bottom:633px;letter-spacing:-0.15px;}
#t1s_300{left:155px;bottom:619px;letter-spacing:-0.11px;}
#t1t_300{left:287px;bottom:619px;}
#t1u_300{left:155px;bottom:606px;letter-spacing:-0.11px;}
#t1v_300{left:287px;bottom:606px;letter-spacing:-0.15px;}
#t1w_300{left:155px;bottom:592px;letter-spacing:-0.11px;}
#t1x_300{left:313px;bottom:592px;letter-spacing:-0.15px;}
#t1y_300{left:155px;bottom:578px;letter-spacing:-0.11px;}
#t1z_300{left:313px;bottom:578px;letter-spacing:-0.15px;}
#t20_300{left:155px;bottom:564px;letter-spacing:-0.11px;}
#t21_300{left:287px;bottom:564px;}
#t22_300{left:155px;bottom:551px;letter-spacing:-0.11px;}
#t23_300{left:260px;bottom:551px;}
#t24_300{left:155px;bottom:537px;letter-spacing:-0.11px;}
#t25_300{left:234px;bottom:537px;}
#t26_300{left:155px;bottom:376px;letter-spacing:-0.11px;}
#t27_300{left:234px;bottom:376px;letter-spacing:-0.15px;}

.s1_300{font-size:15px;font-family:TimesNewRomanPS_12k;color:#231F20;}
.s2_300{font-size:15px;font-family:TimesNewRomanPS-Bold_12g;color:#231F20;}
.s3_300{font-size:14px;font-family:Courier_12t;color:#231F20;}
.t.v0_300{transform:scaleX(0.8);}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts300" type="text/css" >

@font-face {
	font-family: Courier_12t;
	src: url("fonts/Courier_12t.woff") format("woff");
}

@font-face {
	font-family: TimesNewRomanPS-Bold_12g;
	src: url("fonts/TimesNewRomanPS-Bold_12g.woff") format("woff");
}

@font-face {
	font-family: TimesNewRomanPS_12k;
	src: url("fonts/TimesNewRomanPS_12k.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg300Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg300" style="-webkit-user-select: none;"><svg id="pdf300" width="790" height="1018" viewBox="0 0 790 1018" style="width:790px; height:1018px; -moz-transform:scale(1); z-index: 0; isolation: isolate;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<clipPath id="c0_300"><path d="M-1.6,1017.1V-.1H792.5V1017.1Z"/></clipPath>
<style type="text/css"><![CDATA[
.g0_300{
fill: none;
stroke: #231F20;
stroke-width: 0.381;
stroke-miterlimit: 10;
}
.g1_300{
fill: none;
stroke: #FFF;
stroke-width: 1.145;
stroke-miterlimit: 10;
}
.g2_300{
fill: none;
stroke: #000;
stroke-width: 0.381;
stroke-miterlimit: 10;
}
]]></style>
</defs>
<path d="M120.4,298V482.5M672.5,298V482.5M120.2,297.8H672.7M120.2,482.7H672.7M120.4,623.4v19.5M672.5,623.4v19.5M120.2,623.2H672.7M120.2,643.1H672.7" class="g0_300"/>
<g clip-path="url(#c0_300)">
<path d="M-58.2,1.4h55m-55,1017.5h55m797.4,0h55M794.2,1.4h55M10.4,-67.2v55m770,-55v55m0,1044.9v55m-770,-55v55" class="g1_300"/>
<path d="M-58.2,1.4h55m-55,1017.5h55m797.4,0h55M794.2,1.4h55M10.4,-67.2v55m770,-55v55m0,1044.9v55m-770,-55v55M-7.8,510.2c0,-5.1,-4.1,-9.2,-9.2,-9.2c-5,0,-9.1,4.1,-9.1,9.2c0,5,4.1,9.1,9.1,9.1c5.1,0,9.2,-4.1,9.2,-9.1Zm-36.7,0H-3.2M-17,473.5v73.3M817,510.2c0,-5.1,-4.1,-9.2,-9.2,-9.2c-5,0,-9.1,4.1,-9.1,9.2c0,5,4.1,9.1,9.1,9.1c5.1,0,9.2,-4.1,9.2,-9.1Zm-22.8,0h41.2M807.9,473.5v73.3M-7.8,19.8c0,-5.1,-4.1,-9.2,-9.2,-9.2c-5,0,-9.1,4.1,-9.1,9.2c0,5,4.1,9.1,9.1,9.1c5.1,0,9.2,-4.1,9.2,-9.1Zm-36.7,0H-3.2M-17,6V56.4m9.2,944.2c0,-5.1,-4.1,-9.2,-9.2,-9.2c-5,0,-9.1,4.1,-9.1,9.2c0,5.1,4.1,9.2,9.1,9.2c5.1,0,9.2,-4.1,9.2,-9.2Zm-36.7,0H-3.2M-17,963.9v50.4M817,19.8c0,-5.1,-4.1,-9.2,-9.2,-9.2c-5,0,-9.1,4.1,-9.1,9.2c0,5,4.1,9.1,9.1,9.1c5.1,0,9.2,-4.1,9.2,-9.1Zm-22.8,0h41.2M807.9,6V56.4m9.1,944.2c0,-5.1,-4.1,-9.2,-9.2,-9.2c-5,0,-9.1,4.1,-9.1,9.2c0,5.1,4.1,9.2,9.1,9.2c5.1,0,9.2,-4.1,9.2,-9.2Zm-22.8,0h41.2M807.9,963.9v50.4" class="g2_300"/>
</g>
</svg></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_300" class="t s1_300">269 </span><span id="t2_300" class="t s2_300">First, Make It Work </span>
<span id="t3_300" class="t s1_300">I’m not sure why the </span><span id="t4_300" class="t v0_300 s3_300">testWeekdayCodeToString </span><span id="t5_300" class="t s1_300" data-mappings='[[26,"fi"]]'>method was written in the ﬁrst place, but </span>
<span id="t6_300" class="t s1_300">because it is there, it seems obvious that it should not be case sensitive. Writing these tests </span>
<span id="t7_300" class="t s1_300">was trivial [T3]. Making them pass was even easier; I just changed lines 259 and 263 to </span>
<span id="t8_300" class="t s1_300">use </span><span id="t9_300" class="t v0_300 s3_300">equalsIgnoreCase</span><span id="ta_300" class="t s1_300">. </span>
<span id="tb_300" class="t s1_300">I left the tests at line 32 and line 45 commented out because it’s not clear to me that </span>
<span id="tc_300" class="t s1_300">the “tues” and “thurs” abbreviations ought to be supported. </span>
<span id="td_300" class="t s1_300">The tests on line 153 and line 154 don’t pass. Clearly, they should [G2]. We can easily </span>
<span id="te_300" class="t s1_300" data-mappings='[[0,"fi"]]'>ﬁx this, and the tests on line 163 through line 213, by making the following changes to the </span>
<span id="tf_300" class="t v0_300 s3_300">stringToMonthCode </span><span id="tg_300" class="t s1_300">function. </span>
<span id="th_300" class="t s1_300">The commented test on line 318 exposes a bug in the </span><span id="ti_300" class="t v0_300 s3_300">getFollowingDayOfWeek </span><span id="tj_300" class="t s1_300">method </span>
<span id="tk_300" class="t s1_300">(line 672). December 25th, 2004, was a Saturday. The following Saturday was January 1st, </span>
<span id="tl_300" class="t s1_300">2005. However, when we run the test, we see that </span><span id="tm_300" class="t v0_300 s3_300">getFollowingDayOfWeek </span><span id="tn_300" class="t s1_300">returns Decem- </span>
<span id="to_300" class="t s1_300">ber 25th as the Saturday that follows December 25th. Clearly, this is wrong [G3],[T1]. We </span>
<span id="tp_300" class="t s1_300">see the problem in line 685. It is a typical boundary condition error [T5]. It should read as </span>
<span id="tq_300" class="t s1_300">follows: </span>
<span id="tr_300" class="t s1_300">It is interesting to note that this function was the target of an earlier repair. The change </span>
<span id="ts_300" class="t s1_300" data-mappings='[[41,"fi"]]'>history (line 43) shows that “bugs” were ﬁxed in </span><span id="tt_300" class="t v0_300 s3_300">getPreviousDayOfWeek</span><span id="tu_300" class="t s1_300">, </span><span id="tv_300" class="t v0_300 s3_300">getFollowing- </span>
<span id="tw_300" class="t v0_300 s3_300">DayOfWeek</span><span id="tx_300" class="t s1_300">, and </span><span id="ty_300" class="t v0_300 s3_300">getNearestDayOfWeek </span><span id="tz_300" class="t s1_300">[T6]. </span>
<span id="t10_300" class="t s1_300">The </span><span id="t11_300" class="t v0_300 s3_300">testGetNearestDayOfWeek </span><span id="t12_300" class="t s1_300">unit test (line 329), which tests the </span><span id="t13_300" class="t v0_300 s3_300">getNearestDayOfWeek </span>
<span id="t14_300" class="t s1_300">method (line 705), did not start out as long and exhaustive as it currently is. I added a lot </span>
<span id="t15_300" class="t s1_300">of test cases to it because my initial test cases did not all pass [T6]. You can see the pattern </span>
<span id="t16_300" class="t s1_300">of failure by looking at which test cases are commented out. That pattern is revealing [T7]. </span>
<span id="t17_300" class="t s1_300">It shows that the algorithm fails if the nearest day is in the future. Clearly there is some </span>
<span id="t18_300" class="t s1_300">kind of boundary condition error [T5]. </span>
<span id="t19_300" class="t s1_300">The pattern of test coverage reported by Clover is also interesting [T8]. Line 719 </span>
<span id="t1a_300" class="t s1_300">never gets executed! This means that the </span><span id="t1b_300" class="t v0_300 s3_300">if </span><span id="t1c_300" class="t s1_300">statement in line 718 is always false. Sure </span>
<span id="t1d_300" class="t s1_300">enough, a look at the code shows that this must be true. The </span><span id="t1e_300" class="t v0_300 s3_300">adjust </span><span id="t1f_300" class="t s1_300">variable is always neg- </span>
<span id="t1g_300" class="t s1_300">ative and so cannot be greater or equal to 4. So this algorithm is just wrong. </span>
<span id="t1h_300" class="t v0_300 s3_300">457 </span><span id="t1i_300" class="t v0_300 s3_300">if ((result &lt; 1) || (result &gt; 12)) { </span>
<span id="t1j_300" class="t v0_300 s3_300">result = -1; </span>
<span id="t1k_300" class="t v0_300 s3_300">458 </span><span id="t1l_300" class="t v0_300 s3_300">for (int i = 0; i &lt; monthNames.length; i++) { </span>
<span id="t1m_300" class="t v0_300 s3_300">459 </span><span id="t1n_300" class="t v0_300 s3_300">if (s.equalsIgnoreCase(shortMonthNames[i])) { </span>
<span id="t1o_300" class="t v0_300 s3_300">460 </span><span id="t1p_300" class="t v0_300 s3_300">result = i + 1; </span>
<span id="t1q_300" class="t v0_300 s3_300">461 </span><span id="t1r_300" class="t v0_300 s3_300">break; </span>
<span id="t1s_300" class="t v0_300 s3_300">462 </span><span id="t1t_300" class="t v0_300 s3_300">} </span>
<span id="t1u_300" class="t v0_300 s3_300">463 </span><span id="t1v_300" class="t v0_300 s3_300">if (s.equalsIgnoreCase(monthNames[i])) { </span>
<span id="t1w_300" class="t v0_300 s3_300">464 </span><span id="t1x_300" class="t v0_300 s3_300">result = i + 1; </span>
<span id="t1y_300" class="t v0_300 s3_300">465 </span><span id="t1z_300" class="t v0_300 s3_300">break; </span>
<span id="t20_300" class="t v0_300 s3_300">466 </span><span id="t21_300" class="t v0_300 s3_300">} </span>
<span id="t22_300" class="t v0_300 s3_300">467 </span><span id="t23_300" class="t v0_300 s3_300">} </span>
<span id="t24_300" class="t v0_300 s3_300">468 </span><span id="t25_300" class="t v0_300 s3_300">} </span>
<span id="t26_300" class="t v0_300 s3_300">685 </span><span id="t27_300" class="t v0_300 s3_300">if (baseDOW &gt;= targetWeekday) { </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
